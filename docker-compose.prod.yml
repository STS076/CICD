services: 
  next:
    image: ghcr.io/sts076/cicd:latest
    restart: always
    ports:
      - 3000:3000
    networks : 
      - reverse-proxy
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.next-production.rule=PathPrefix(`/`)"
      - "traefik.http.routers.next-production.entrypoints=web"

  db :
    image : mariadb:10.6
    environment : 
      MARIADB_DATABASE : cube
      MARIADB_USER : cube
      MARIADB_PASSWORD : cube
      MARIADB_RANDOM_ROOT_PASSWORD : "yes"
    volumes : 
      - ./docker/db/data:/var/lib/mysql

  adminer : 
    image : adminer 
    ports : 
      - 8080:8080

networks : 
  reverse-proxy: 
    name: reverse-proxy
    external : true

